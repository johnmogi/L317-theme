/**
 * LearnDash Strong RTL Fix - Maximum Specificity
 * Aggressive CSS to force proper RTL layout and strong blue design
 */

/* Force RTL on everything */
body.single-sfwd-courses,
body.single-sfwd-courses *,
.learndash-wrapper,
.learndash-wrapper *,
.ld-course-wrapper,
.ld-course-wrapper * {
    direction: rtl !important;
    text-align: right !important;
    font-family: 'Assistant', sans-serif !important;
}

/* Maximum specificity for RTL grid layout - FORCE RTL */
body.single-sfwd-courses .ld-accordion__item--final-quiz, 
body.single-sfwd-courses .ld-accordion__item--lesson-quiz, 
body.single-sfwd-courses .ld-accordion__item--topic, 
body.single-sfwd-courses .ld-accordion__item--topic-quiz {
    display: flex !important;
    flex-direction: row-reverse !important;
    justify-content: space-between !important;
    align-items: center !important;
    direction: rtl !important;
    text-align: right !important;
    padding: 0 !important;
    margin: 0 !important;
    width: 100% !important;
    box-sizing: border-box !important;
}

/* Force icon to right side - AGGRESSIVE RTL */
body.single-sfwd-courses .ld-accordion__item-icon {
    order: 1 !important;
    flex-shrink: 0 !important;
    margin: 0 15px 0 0 !important;
    padding: 0 !important;
    color: #2C3391 !important;
    width: 24px !important;
    height: 24px !important;
    position: relative !important;
    right: auto !important;
    left: auto !important;
}

/* Force title to left side (RTL) - FLEX BASED */
body.single-sfwd-courses .ld-accordion__item-title-wrapper {
    order: 2 !important;
    flex-grow: 1 !important;
    text-align: right !important;
    direction: rtl !important;
    width: 100% !important;
    padding: 0 !important;
    margin: 0 !important;
}

/* Strong lesson headers */
body.single-sfwd-courses .ld-accordion__item--lesson {
    background: #2C3391 !important;
    color: white !important;
    margin: 25px 0 !important;
    border: none !important;
    border-radius: 8px !important;
    box-shadow: 0 4px 12px rgba(44, 51, 145, 0.25) !important;
}

body.single-sfwd-courses .ld-accordion__item-header--lesson {
    background: #2C3391 !important;
    color: white !important;
    padding: 18px 20px !important;
    text-align: right !important;
    direction: rtl !important;
    border-radius: 4px 4px 0 0 !important;
}

body.single-sfwd-courses .ld-accordion__item-title--lesson {
    color: white !important;
    font-weight: 700 !important;
    font-size: 1.4rem !important;
    text-decoration: none !important;
    display: block !important;
    text-align: right !important;
    direction: rtl !important;
}

body.single-sfwd-courses .ld-accordion__item--lesson .ld-accordion__item-icon {
    color: white !important;
}

/* Strong topic styling - ENHANCED VISUAL */
body.single-sfwd-courses .ld-accordion__item--topic {
    background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%) !important;
    border: 3px solid #2C3391 !important;
    border-right: 8px solid #2C3391 !important;
    margin: 15px 0 !important;
    padding: 0 !important;
    border-radius: 0 8px 8px 0 !important;
    box-shadow: 0 4px 12px rgba(44, 51, 145, 0.2) !important;
    position: relative !important;
    overflow: hidden !important;
}

body.single-sfwd-courses .ld-accordion__item-header--topic {
    padding: 15px 20px !important;
    background: #f8f9fa !important;
    text-align: right !important;
    direction: rtl !important;
    border-bottom: 1px solid #e9ecef !important;
    color: #2C3391 !important;
    position: relative !important;
    z-index: 1 !important;
}

body.single-sfwd-courses .ld-accordion__item-title--topic {
    color: #2C3391 !important;
    font-weight: 600 !important;
    text-decoration: none !important;
    font-size: 1.1rem !important;
    display: block !important;
    text-align: right !important;
    direction: rtl !important;
}

/* Strong quiz styling */
body.single-sfwd-courses .ld-accordion__item--topic-quiz {
    background: #f0f4ff !important;
    border: 2px solid #d6e3ff !important;
    border-right: 4px solid #2C3391 !important;
    margin: 8px 0 8px 40px !important;
    border-radius: 0 4px 4px 0 !important;
    box-shadow: 0 1px 4px rgba(44, 51, 145, 0.15) !important;
}

body.single-sfwd-courses .ld-accordion__item-header--topic-quiz {
    padding: 15px 20px !important;
    text-align: right !important;
    direction: rtl !important;
    background: transparent !important;
}

body.single-sfwd-courses .ld-accordion__item-title--topic-quiz {
    color: #2C3391 !important;
    font-weight: 500 !important;
    text-decoration: none !important;
    font-size: 1.1rem !important;
    display: block !important;
    text-align: right !important;
    direction: rtl !important;
}

/* Force show all content */
body.single-sfwd-courses .ld-accordion__items {
    display: block !important;
    height: auto !important;
    overflow: visible !important;
    opacity: 1 !important;
    max-height: none !important;
}

/* Hide collapse/expand buttons */
body.single-sfwd-courses .ld-accordion__item-expand,
body.single-sfwd-courses .ld-accordion__item-collapse {
    display: none !important;
}

/* Remove any conflicting transforms */
body.single-sfwd-courses .ld-accordion__item *,
body.single-sfwd-courses .ld-accordion__item-steps *,
body.single-sfwd-courses .ld-accordion__items--topics *,
body.single-sfwd-courses .ld-accordion__items--topic-quizzes * {
    transform: none !important;
    position: static !important;
    left: auto !important;
    right: auto !important;
    text-indent: 0 !important;
    margin-left: 0 !important;
}

/* Force RTL on header elements */
body.single-sfwd-courses .ld-accordion__item-header {
    display: grid !important;
    grid-template-areas: "title icon" !important;
    grid-template-columns: 1fr auto !important;
    column-gap: 15px !important;
    align-items: center !important;
    direction: rtl !important;
    text-align: right !important;
}

/* Attributes positioning */
body.single-sfwd-courses .ld-accordion__item-attributes {
    grid-area: attributes !important;
    text-align: right !important;
    direction: rtl !important;
    margin-top: 8px !important;
    order: 3 !important;
}

/* Course progress and status */
body.single-sfwd-courses .ld-progress-bar {
    background: #e9ecef !important;
    border-radius: 0 !important;
    direction: rtl !important;
    height: 8px !important;
    width: 100% !important;
    overflow: hidden !important;
}

body.single-sfwd-courses .ld-progress-bar-percentage {
    background: #2C3391 !important;
    border-radius: 0 !important;
    height: 100% !important;
    float: right !important;
    transition: width 0.3s ease !important;
}

/* Course progress container */
body.single-sfwd-courses .ld-course-progress {
    direction: rtl !important;
    text-align: right !important;
    margin: 15px 0 !important;
}

body.single-sfwd-courses .ld-course-progress-label {
    direction: rtl !important;
    text-align: right !important;
    font-size: 0.9rem !important;
    color: #6c757d !important;
    margin-bottom: 5px !important;
}

/* Status indicators */
body.single-sfwd-courses .ld-status-complete {
    color: #28a745 !important;
    font-weight: 600 !important;
}

body.single-sfwd-courses .ld-status-incomplete {
    color: #6c757d !important;
    font-weight: 500 !important;
}

/* Hover effects */
body.single-sfwd-courses .ld-accordion__item-title--topic:hover {
    color: #1e2875 !important;
    background: rgba(44, 51, 145, 0.05) !important;
}

body.single-sfwd-courses .ld-accordion__item-title--topic-quiz:hover {
    color: #1e2875 !important;
    background: rgba(44, 51, 145, 0.05) !important;
}

/* Mobile responsive */
@media (max-width: 768px) {
    body.single-sfwd-courses .ld-accordion__item-header--lesson,
    body.single-sfwd-courses .ld-accordion__item-header--topic,
    body.single-sfwd-courses .ld-accordion__item-header--topic-quiz {
        padding: 15px 20px !important;
    }
    
    body.single-sfwd-courses .ld-accordion__item-title--lesson {
        font-size: 1.2rem !important;
    }
    
    body.single-sfwd-courses .ld-accordion__item-title--topic {
        font-size: 1.1rem !important;
    }
    
    body.single-sfwd-courses .ld-accordion__item-title--topic-quiz {
        font-size: 1rem !important;
    }
}

/* Force container alignment */
body.single-sfwd-courses .learndash-wrapper,
body.single-sfwd-courses .ld-course-wrapper {
    direction: rtl !important;
    text-align: right !important;
    max-width: 1000px !important;
    margin: 0 auto !important;
    padding: 20px !important;
}

/* ULTRA AGGRESSIVE RTL FIXES */
body.single-sfwd-courses .ld-accordion__item-header {
    display: flex !important;
    flex-direction: row-reverse !important;
    justify-content: space-between !important;
    align-items: center !important;
    width: 100% !important;
    padding: 15px 20px !important;
    box-sizing: border-box !important;
}

/* Force all text to RTL */
body.single-sfwd-courses .ld-accordion__item-title,
body.single-sfwd-courses .ld-accordion__item-title--topic,
body.single-sfwd-courses .ld-accordion__item-title--topic-quiz,
body.single-sfwd-courses .ld-accordion__item-title--lesson {
    direction: rtl !important;
    text-align: right !important;
    unicode-bidi: bidi-override !important;
    writing-mode: horizontal-tb !important;
}

/* Override any LearnDash positioning */
body.single-sfwd-courses .ld-accordion__item * {
    position: static !important;
    float: none !important;
    clear: both !important;
    left: auto !important;
    right: auto !important;
    transform: none !important;
    margin-left: 0 !important;
    text-indent: 0 !important;
}

/* Force icon positioning with !important on everything */
body.single-sfwd-courses .ld-accordion__item-icon {
    position: absolute !important;
    right: 20px !important;
    left: auto !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    z-index: 10 !important;
}

/* Force title positioning */
body.single-sfwd-courses .ld-accordion__item-title-wrapper {
    padding-right: 60px !important;
    padding-left: 0 !important;
    margin-right: 0 !important;
    margin-left: 0 !important;
    width: calc(100% - 60px) !important;
}

/* Make headers relative for icon positioning */
body.single-sfwd-courses .ld-accordion__item-header {
    position: relative !important;
}

/* Strong visual hierarchy */
body.single-sfwd-courses .ld-accordion__section--lessons {
    background: #f8f9fa !important;
    border: 2px solid #2C3391 !important;
    border-radius: 10px !important;
    padding: 20px !important;
    margin: 20px 0 !important;
    box-shadow: 0 6px 20px rgba(44, 51, 145, 0.15) !important;
}

/* Topic icons should be white on blue backgrounds */
body.single-sfwd-courses .ld-accordion__item--topic .ld-accordion__item-icon {
    color: white !important;
    filter: brightness(0) invert(1) !important;
}

/* Quiz styling enhancement */
body.single-sfwd-courses .ld-accordion__item--topic-quiz {
    background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%) !important;
    border: 2px solid #2196f3 !important;
    border-right: 6px solid #2196f3 !important;
    margin: 8px 0 8px 40px !important;
    border-radius: 0 6px 6px 0 !important;
    box-shadow: 0 2px 8px rgba(33, 150, 243, 0.2) !important;
}

body.single-sfwd-courses .ld-accordion__item-header--topic-quiz {
    background: #f0f4ff !important;
    color: #6c757d !important;
    padding: 15px 25px !important;
    border-bottom: 1px solid #e9ecef !important;
}

body.single-sfwd-courses .ld-accordion__item-title--topic-quiz {
    color: #6c757d !important;
    font-weight: 500 !important;
    font-size: 0.95rem !important;
    font-style: italic !important;
}

body.single-sfwd-courses .ld-accordion__item--topic-quiz .ld-accordion__item-icon {
    color: #6c757d !important;
    filter: none !important;
}

/* ULTRA AGGRESSIVE QUIZ INDENTATION FIX */
body.single-sfwd-courses .ld-accordion__items--topic-quizzes {
    margin: 0 !important;
    padding: 0 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    text-indent: 0 !important;
    position: static !important;
    left: 0 !important;
    right: 0 !important;
    width: 100% !important;
}

body.single-sfwd-courses .ld-accordion__items--topic-quizzes .ld-accordion__item--topic-quiz {
    margin: 4px 0 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    position: relative !important;
    left: 0 !important;
    right: 0 !important;
    transform: none !important;
    text-indent: 0 !important;
    width: 100% !important;
    box-sizing: border-box !important;
}

/* Force all quiz containers to have no indentation */
body.single-sfwd-courses .ld-accordion__item--topic .ld-accordion__items,
body.single-sfwd-courses .ld-accordion__item--topic .ld-accordion__items--topic-quizzes {
    margin: 0 !important;
    padding: 0 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    position: static !important;
    left: auto !important;
    right: auto !important;
    width: 100% !important;
    text-indent: 0 !important;
}

/* Target specific LearnDash quiz indentation classes */
body.single-sfwd-courses .ld-accordion__item--topic-quiz,
body.single-sfwd-courses .ld-accordion__item.ld-accordion__item--topic-quiz {
    margin-left: 0 !important;
    padding-left: 0 !important;
    text-indent: 0 !important;
    position: relative !important;
    left: 0 !important;
    right: 0 !important;
    transform: translateX(0) !important;
}

/* Override any LearnDash default indentation styles */
body.single-sfwd-courses .ld-accordion__item--topic-quiz .ld-accordion__item-header,
body.single-sfwd-courses .ld-accordion__item--topic-quiz .ld-accordion__item-header--topic-quiz {
    margin-left: 0 !important;
    padding-left: 15px !important;
    text-indent: 0 !important;
    position: relative !important;
    left: 0 !important;
    right: 0 !important;
}

/* Enhanced RTL Progress Bar Styling */
body.single-sfwd-courses .ld-progress {
    direction: rtl !important;
    text-align: right !important;
}

body.single-sfwd-courses .ld-progress-stats {
    direction: rtl !important;
    text-align: right !important;
    font-size: 0.85rem !important;
    color: #6c757d !important;
    margin-top: 5px !important;
}

body.single-sfwd-courses .ld-course-status {
    direction: rtl !important;
    text-align: right !important;
    margin: 10px 0 !important;
}

/* Fix any remaining LearnDash positioning issues */
body.single-sfwd-courses .ld-accordion__item--topic-quiz * {
    margin-left: 0 !important;
    text-indent: 0 !important;
    position: static !important;
    left: auto !important;
    right: auto !important;
    transform: none !important;
}

/* FINAL RTL PERFECTION FIXES */
/* Force proper Hebrew text direction and alignment */
body.single-sfwd-courses * {
    font-family: 'Assistant', 'Segoe UI', Tahoma, Arial, sans-serif !important;
}

body.single-sfwd-courses .ld-accordion__item-title,
body.single-sfwd-courses .ld-accordion__item-title--topic,
body.single-sfwd-courses .ld-accordion__item-title--topic-quiz,
body.single-sfwd-courses .ld-accordion__item-title--lesson {
    direction: rtl !important;
    text-align: right !important;
    unicode-bidi: embed !important;
    font-weight: 600 !important;
    line-height: 1.4 !important;
}

/* Perfect icon positioning for RTL */
body.single-sfwd-courses .ld-accordion__item {
    position: relative !important;
}

body.single-sfwd-courses .ld-accordion__item-icon {
    position: absolute !important;
    right: 15px !important;
    left: auto !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    z-index: 5 !important;
    width: 24px !important;
    height: 24px !important;
    flex-shrink: 0 !important;
}

/* Perfect title positioning for RTL */
body.single-sfwd-courses .ld-accordion__item-title-wrapper {
    padding-right: 50px !important;
    padding-left: 15px !important;
    margin: 0 !important;
    width: 100% !important;
    box-sizing: border-box !important;
    display: block !important;
}

/* Minimal white lesson sections */
body.single-sfwd-courses .ld-accordion__section--lessons {
    background: white !important;
    border: 1px solid #e9ecef !important;
    border-radius: 3px !important;
    padding: 15px !important;
    margin: 15px 0 !important;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.03) !important;
    position: relative !important;
    overflow: hidden !important;
}

/* Minimal top border for lesson sections */
body.single-sfwd-courses .ld-accordion__section--lessons::before {
    content: '' !important;
    position: absolute !important;
    top: 0 !important;
    right: 0 !important;
    width: 100% !important;
    height: 2px !important;
    background: #2C3391 !important;
    z-index: 1 !important;
}

/* Minimal lesson headers - reduce blue */
body.single-sfwd-courses .ld-accordion__item--lesson {
    background: #2C3391 !important;
    color: white !important;
    margin: 15px 0 !important;
    border: none !important;
    border-radius: 4px !important;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
    position: relative !important;
    overflow: hidden !important;
}

/* Remove excessive lesson decoration */
body.single-sfwd-courses .ld-accordion__item--lesson::before {
    display: none !important;
}

/* Minimal white topic styling */
body.single-sfwd-courses .ld-accordion__item--topic {
    background: white !important;
    border: 1px solid #e9ecef !important;
    border-right: 2px solid #2C3391 !important;
    margin: 6px 0 !important;
    padding: 0 !important;
    border-radius: 0 2px 2px 0 !important;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05) !important;
    position: relative !important;
    overflow: hidden !important;
    transition: none !important;
}

body.single-sfwd-courses .ld-accordion__item--topic:hover {
    transform: translateX(-3px) !important;
    box-shadow: 0 6px 20px rgba(44, 51, 145, 0.25) !important;
}

/* Quiz styling - NO INDENTATION, different from lessons */
body.single-sfwd-courses .ld-accordion__item--topic-quiz {
    background: #fafbfc !important;
    border: 1px solid #d6e3ff !important;
    border-right: 2px solid #6c757d !important;
    margin: 4px 0 !important;
    margin-right: 0 !important;
    margin-left: 0 !important;
    padding: 0 !important;
    border-radius: 0 3px 3px 0 !important;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05) !important;
    transition: all 0.3s ease !important;
}

body.single-sfwd-courses .ld-accordion__item--topic-quiz:hover {
    transform: translateX(-2px) !important;
    box-shadow: 0 5px 18px rgba(25, 118, 210, 0.3) !important;
}

/* Remove any conflicting styles */
body.single-sfwd-courses .ld-accordion__item-header {
    position: relative !important;
    display: block !important;
    width: 100% !important;
    padding: 15px 20px !important;
    box-sizing: border-box !important;
}

/* Ensure proper text rendering */
body.single-sfwd-courses .ld-accordion__item-title {
    display: block !important;
    width: 100% !important;
    text-decoration: none !important;
    color: inherit !important;
    font-size: inherit !important;
    font-weight: inherit !important;
    line-height: 1.4 !important;
    word-wrap: break-word !important;
    hyphens: auto !important;
}
